/** 
 * @file Core2.c
 * @generated by CPrinter
 * @date Sun May 03 14:20:46 CEST 2015
 */

#include "../include/x86.h"

// Core Global Declaration
extern pthread_barrier_t iter_barrier;
extern int stopThreads;
extern char *const Init__sigmas__0;  // Init > sigmas size:= 144*char defined in Core0
extern sem_t sem_0_SSRE; 
extern float *const out1__sigmas__0;  // sigmas_out1 > BuildSS_sigmas size:= 36*float defined in Core0
extern float *const out2__sigmas__0;  // sigmas_out2 > Orientation_sigmas size:= 36*float defined in Core0
extern float *const out3__sigmas__0;  // sigmas_out3 > Render_sigmas size:= 36*float defined in Core0
extern float *const sigmas__in__0;  // Init_sigmas > sigmas_in size:= 36*float defined in Core0
extern char *const sigmas__Render__0;  // sigmas > Render size:= 144*char defined in Core0
extern char *const sigmas__Orientation__0;  // sigmas > Orientation size:= 144*char defined in Core0
extern char *const sigmas__BuildSS__0;  // sigmas > BuildSS size:= 144*char defined in Core0

// Core Global Definitions
sem_t sem_13_SSRE;
sem_t sem_14_SSRE;
sem_t sem_15_SSRE;

void *computationThread_Core2(void *arg){
	// Initialisation(s)
	sem_init(&sem_13_SSRE,0,0/*init_val*/); // sigmas > Render
	sem_init(&sem_14_SSRE,0,0/*init_val*/); // sigmas > Orientation
	sem_init(&sem_15_SSRE,0,0/*init_val*/); // sigmas > BuildSS

	// Begin the execution loop 
	while(1){
		pthread_barrier_wait(&iter_barrier);
		if(stopThreads){
			pthread_exit(NULL);
		}
		receiveStart(); // Core1 > Core2: Init__sigmas__0 
		receiveEnd(&sem_0_SSRE/*ID*/); // Core1 > Core2: Init__sigmas__0 
		// Broadcast sigmas
		{
			memcpy(out1__sigmas__0+0, sigmas__in__0+0, 36*sizeof(float));
			memcpy(out2__sigmas__0+0, sigmas__in__0+0, 36*sizeof(float));
			memcpy(out3__sigmas__0+0, sigmas__in__0+0, 36*sizeof(float));
		}
		sendStart(&sem_13_SSRE/*ID*/); // Core2 > Core0: sigmas__Render__0 
		sendEnd(); // Core2 > Core0: sigmas__Render__0 
		sendStart(&sem_14_SSRE/*ID*/); // Core2 > Core0: sigmas__Orientation__0 
		sendEnd(); // Core2 > Core0: sigmas__Orientation__0 
		sendStart(&sem_15_SSRE/*ID*/); // Core2 > Core0: sigmas__BuildSS__0 
		sendEnd(); // Core2 > Core0: sigmas__BuildSS__0 
	}
}
