/** 
 * @file Core1.c
 * @generated by CPrinter
 * @date Sun May 03 14:20:46 CEST 2015
 */

#include "../include/x86.h"

// Core Global Declaration
extern pthread_barrier_t iter_barrier;
extern int stopThreads;
extern int *const octavesW_g__in__0;  // Init_octavesW_g > octavesW_in size:= 6*int defined in Core0
extern int *const octavesH_g__in__0;  // Init_octavesH_g > octavesH_in size:= 6*int defined in Core0
extern float *const sigmas__in__0;  // Init_sigmas > sigmas_in size:= 36*float defined in Core0
extern char *const Init__sigmas__0;  // Init > sigmas size:= 144*char defined in Core0
extern char *const Init__octavesW__0;  // Init > octavesW size:= 24*char defined in Core0
extern int *const out1__octavesH__0;  // octavesH_out1 > BuildOB_octavesH size:= 6*int defined in Core0
extern int *const out2__octavesH__0;  // octavesH_out2 > BuildSS_octavesH size:= 6*int defined in Core0
extern int *const out3__octavesH__0;  // octavesH_out3 > DoG_octavesH size:= 6*int defined in Core0
extern int *const out4__octavesH__0;  // octavesH_out4 > Extreme_octavesH size:= 6*int defined in Core0
extern int *const out5__octavesH__0;  // octavesH_out5 > Render_octavesH size:= 6*int defined in Core0
extern char *const octavesH__Render__0;  // octavesH > Render size:= 24*char defined in Core0
extern char *const octavesH__Extreme__0;  // octavesH > Extreme size:= 24*char defined in Core0
extern char *const octavesH__DoG__0;  // octavesH > DoG size:= 24*char defined in Core0
extern char *const octavesH__BuildSS__0;  // octavesH > BuildSS size:= 24*char defined in Core0
extern char *const octavesH__BuildOB__0;  // octavesH > BuildOB size:= 24*char defined in Core0

// Core Global Definitions
sem_t sem_0_SSRE;
sem_t sem_1_SSRE;
sem_t sem_2_SSRE;
sem_t sem_3_SSRE;
sem_t sem_4_SSRE;
sem_t sem_5_SSRE;
sem_t sem_6_SSRE;

void *computationThread_Core1(void *arg){
	// Initialisation(s)
	sem_init(&sem_0_SSRE,0,0/*init_val*/); // Init > sigmas
	sem_init(&sem_1_SSRE,0,0/*init_val*/); // Init > octavesW
	sem_init(&sem_2_SSRE,0,0/*init_val*/); // octavesH > Render
	sem_init(&sem_3_SSRE,0,0/*init_val*/); // octavesH > Extreme
	sem_init(&sem_4_SSRE,0,0/*init_val*/); // octavesH > DoG
	sem_init(&sem_5_SSRE,0,0/*init_val*/); // octavesH > BuildSS
	sem_init(&sem_6_SSRE,0,0/*init_val*/); // octavesH > BuildOB

	// Begin the execution loop 
	while(1){
		pthread_barrier_wait(&iter_barrier);
		if(stopThreads){
			pthread_exit(NULL);
		}
		InitSift(352/*xsize*/,288/*ysize*/,octavesW_g__in__0,octavesH_g__in__0,sigmas__in__0); // Init
		sendStart(&sem_0_SSRE/*ID*/); // Core1 > Core2: Init__sigmas__0 
		sendEnd(); // Core1 > Core2: Init__sigmas__0 
		sendStart(&sem_1_SSRE/*ID*/); // Core1 > Core3: Init__octavesW__0 
		sendEnd(); // Core1 > Core3: Init__octavesW__0 
		// Broadcast octavesH
		{
			memcpy(out1__octavesH__0+0, octavesH_g__in__0+0, 6*sizeof(int));
			memcpy(out2__octavesH__0+0, octavesH_g__in__0+0, 6*sizeof(int));
			memcpy(out3__octavesH__0+0, octavesH_g__in__0+0, 6*sizeof(int));
			memcpy(out4__octavesH__0+0, octavesH_g__in__0+0, 6*sizeof(int));
			memcpy(out5__octavesH__0+0, octavesH_g__in__0+0, 6*sizeof(int));
		}
		sendStart(&sem_2_SSRE/*ID*/); // Core1 > Core0: octavesH__Render__0 
		sendEnd(); // Core1 > Core0: octavesH__Render__0 
		sendStart(&sem_3_SSRE/*ID*/); // Core1 > Core0: octavesH__Extreme__0 
		sendEnd(); // Core1 > Core0: octavesH__Extreme__0 
		sendStart(&sem_4_SSRE/*ID*/); // Core1 > Core0: octavesH__DoG__0 
		sendEnd(); // Core1 > Core0: octavesH__DoG__0 
		sendStart(&sem_5_SSRE/*ID*/); // Core1 > Core0: octavesH__BuildSS__0 
		sendEnd(); // Core1 > Core0: octavesH__BuildSS__0 
		sendStart(&sem_6_SSRE/*ID*/); // Core1 > Core0: octavesH__BuildOB__0 
		sendEnd(); // Core1 > Core0: octavesH__BuildOB__0 
	}
}
