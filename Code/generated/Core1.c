/** 
 * @file Core1.c
 * @generated by CPrinter
 * @date Sun May 03 23:32:00 CEST 2015
 */

#include "../include/x86.h"

// Core Global Declaration
extern pthread_barrier_t iter_barrier;
extern int stopThreads;
extern char SharedMem[157560580]; //  size:= 157560580*char
extern float *const init_out__dog__0;  // Extreme_init_dog_init_out > Extreme_dog size:= 3041280*float defined in Core0
extern uchar *const init_out__in__0;  // Img_init_in_init_out > Img_in size:= 101376*uchar defined in Core0
extern char *const Init__Init_end_octavesW_g__0;  // Init > Init_end_octavesW_g size:= 24*char defined in Core0
extern sem_t sem_0_SSRE; 
extern pointList *const init_out__keyPointList__0;  // Orientation_init_keyPointList_init_out > Orientation_keyPointList size:= 1*pointList defined in Core0
extern char *const Orientation_init_scaleSpace___0;  // Orientation_init_scaleSpace > Orientation size:= 14598144*char defined in Core0
extern sem_t sem_1_SSRE; 
extern uchar *const y__end_in__0;  // ReadYUV_y > ReadYUV_end_y_end_in size:= 101376*uchar defined in Core0
extern uchar *const init_out__img__1;  // Render_init_img_init_out > Render_img size:= 101376*uchar defined in Core0
extern pointList *const init_out__keyPointList__1;  // Render_init_keyPointList_init_out > Render_keyPointList size:= 1*pointList defined in Core0
extern int *const init_out__octavesH__0;  // Render_init_octavesH_init_out > Render_octavesH size:= 6*int defined in Core0
extern int *const init_out__octavesW__0;  // Render_init_octavesW_init_out > Render_octavesW size:= 6*int defined in Core0
extern float *const init_out__sigmas__0;  // Render_init_sigmas_init_out > Render_sigmas size:= 36*float defined in Core0
extern uchar *const init_out__b__0;  // WritePGM_init_b_init_out > WritePGM_b size:= 101376*uchar defined in Core0
extern char *const WritePGM_init_b__WritePGM__0;  // WritePGM_init_b > WritePGM size:= 101376*char defined in Core0
extern int *const init_out__in__3;  // octavesH_init_in_init_out > octavesH_in size:= 6*int defined in Core0
extern int *const init_out__in__2;  // octavesW_init_in_init_out > octavesW_in size:= 6*int defined in Core0
extern float *const init_out__in__4;  // sigmas_init_in_init_out > sigmas_in size:= 36*float defined in Core0
extern int *const out1__octavesH__0;  // octavesH_out1 > BuildOB_octavesH size:= 6*int defined in Core0
extern int *const out3__octavesH__0;  // octavesH_out3 > DoG_octavesH size:= 6*int defined in Core0
extern int *const out4__octavesH__0;  // octavesH_out4 > Extreme_octavesH size:= 6*int defined in Core0
extern int *const out5__end_in__0;  // octavesH_out5 > octavesH_end_out5_end_in size:= 6*int defined in Core0
extern char *const octavesH__DoG__0;  // octavesH > DoG size:= 24*char defined in Core0
extern char *const octavesH__BuildOB__0;  // octavesH > BuildOB size:= 24*char defined in Core0
extern int *const out1__octavesW__0;  // octavesW_out1 > BuildOB_octavesW size:= 6*int defined in Core0
extern int *const out3__octavesW__0;  // octavesW_out3 > DoG_octavesW size:= 6*int defined in Core0
extern int *const out4__octavesW__0;  // octavesW_out4 > Extreme_octavesW size:= 6*int defined in Core0
extern int *const out5__octavesW__0;  // octavesW_out5 > Orientation_octavesW size:= 6*int defined in Core0
extern int *const out6__end_in__0;  // octavesW_out6 > octavesW_end_out6_end_in size:= 6*int defined in Core0
extern char *const octavesW__DoG__0;  // octavesW > DoG size:= 24*char defined in Core0
extern char *const octavesW__BuildOB__0;  // octavesW > BuildOB size:= 24*char defined in Core0
extern float *const out2__sigmas__0;  // sigmas_out2 > Orientation_sigmas size:= 36*float defined in Core0
extern float *const out3__end_in__0;  // sigmas_out3 > sigmas_end_out3_end_in size:= 36*float defined in Core0
extern int *const octavesW_g__end_in__0;  // Init_octavesW_g > Init_end_octavesW_g_end_in size:= 6*int defined in Core0
extern uchar *const out1__end_in__0;  // Img_out1 > Img_end_out1_end_in size:= 101376*uchar defined in Core0
extern uchar *const out2__end_in__1;  // Img_out2 > Img_end_out2_end_in size:= 101376*uchar defined in Core0
extern char *const Img__Img_end_out1__0;  // Img > Img_end_out1 size:= 101376*char defined in Core0
extern uchar *const r__end_in__0;  // Render_r > Render_end_r_end_in size:= 101376*uchar defined in Core0
extern uchar *const g__end_in__0;  // Render_g > Render_end_g_end_in size:= 101376*uchar defined in Core0
extern uchar *const b__end_in__0;  // Render_b > Render_end_b_end_in size:= 101376*uchar defined in Core0
extern char *const Render__Render_end_b__0;  // Render > Render_end_b size:= 101376*char defined in Core0
extern char *const Render__Render_end_r__0;  // Render > Render_end_r size:= 101376*char defined in Core0
extern pointList *const keyPointList__end_in__0;  // Extreme_keyPointList > Extreme_end_keyPointList_end_in size:= 1*pointList defined in Core0
extern char *const Extreme__Extreme_end_keyPoin__0;  // Extreme > Extreme_end_keyPointList size:= 12004*char defined in Core0
extern pointList *const keyPointListCP__end_in__0;  // Orientation_keyPointListCP > Orientation_end_keyPointListCP_end_in size:= 1*pointList defined in Core0
extern float *const init_out__scaleSpace__0;  // Orientation_init_scaleSpace_init_out > Orientation_scaleSpace size:= 3649536*float defined in Core0
extern char *const scaleSpace__scaleSpace_end_o__0;  // scaleSpace > scaleSpace_end_out2 size:= 14598144*char defined in Core0
extern sem_t sem_13_SSRE; 
extern char *const FIFO_Head_scaleSpace_end_out__0;  // FIFO_Head_scaleSpace_end_out2 > Orientation_init_scaleSpace size:= 14598144*char defined in Core2
extern char *const FIFO_Body_scaleSpace_end_out__0;  // FIFO_Body_scaleSpace_end_out2 > Orientation_init_scaleSpace size:= 14598144*char defined in Core2
extern float *const out2__end_in__0;  // scaleSpace_out2 > scaleSpace_end_out2_end_in size:= 3649536*float defined in Core0
extern char *const FIFO_Head_Render_end_g__Writ__0;  // FIFO_Head_Render_end_g > WritePGM_init_g size:= 101376*char defined in Core2

// Core Global Definitions
char *const FIFO_Head_DoG_end_dog__Extre__0 = (char*) (SharedMem+133027540);  // FIFO_Head_DoG_end_dog > Extreme_init_dog size:= 12165120*char
char *const FIFO_Head_ReadYUV_end_y__Img__0 = (char*) (SharedMem+132926116);  // FIFO_Head_ReadYUV_end_y > Img_init_in size:= 101376*char
char *const FIFO_Head_Extreme_end_keyPoi__0 = (char*) (SharedMem+42386124);  // FIFO_Head_Extreme_end_keyPointList > Orientation_init_keyPointList size:= 12004*char
char *const FIFO_Head_Img_end_out2__Rend__0 = (char*) (SharedMem+157459180);  // FIFO_Head_Img_end_out2 > Render_init_img size:= 101376*char
char *const FIFO_Body_Img_end_out2__Rend__0 = (char*) (SharedMem+0);  // FIFO_Body_Img_end_out2 > Render_init_img size:= 506880*char
char *const FIFO_Head_Orientation_end_ke__0 = (char*) (SharedMem+58423468);  // FIFO_Head_Orientation_end_keyPointListCP > Render_init_keyPointList size:= 12004*char
char *const FIFO_Head_octavesH_end_out5___0 = (char*) (SharedMem+42273936);  // FIFO_Head_octavesH_end_out5 > Render_init_octavesH size:= 24*char
char *const FIFO_Head_octavesW_end_out6___0 = (char*) (SharedMem+103323916);  // FIFO_Head_octavesW_end_out6 > Render_init_octavesW size:= 24*char
char *const FIFO_Head_sigmas_end_out3__R__0 = (char*) (SharedMem+103323772);  // FIFO_Head_sigmas_end_out3 > Render_init_sigmas size:= 144*char
char *const FIFO_Head_Render_end_b__Writ__0 = (char*) (SharedMem+506880);  // FIFO_Head_Render_end_b > WritePGM_init_b size:= 101376*char
sem_t sem_2_SSRE;
char *const FIFO_Head_Init_end_octavesH___0 = (char*) (SharedMem+133027492);  // FIFO_Head_Init_end_octavesH_g > octavesH_init_in size:= 24*char
char *const FIFO_Head_Init_end_octavesW___0 = (char*) (SharedMem+43107952);  // FIFO_Head_Init_end_octavesW_g > octavesW_init_in size:= 24*char
char *const FIFO_Head_Init_end_sigmas__s__0 = (char*) (SharedMem+103425484);  // FIFO_Head_Init_end_sigmas > sigmas_init_in size:= 144*char
sem_t sem_5_SSRE;
sem_t sem_6_SSRE;
sem_t sem_7_SSRE;
sem_t sem_8_SSRE;
sem_t sem_9_SSRE;
sem_t sem_10_SSRE;
sem_t sem_11_SSRE;
sem_t sem_12_SSRE;

void *computationThread_Core1(void *arg){
	// Initialisation(s)
	fifoInit(FIFO_Head_DoG_end_dog__Extre__0, 12165120*sizeof(char), NULL, 0);
	fifoInit(FIFO_Head_ReadYUV_end_y__Img__0, 101376*sizeof(char), NULL, 0);
	fifoInit(FIFO_Head_Extreme_end_keyPoi__0, 12004*sizeof(char), NULL, 0);
	initReadYUV(352/*xsize*/,288/*ysize*/); // ReadYUV
	fifoInit(FIFO_Head_Img_end_out2__Rend__0, 101376*sizeof(char), FIFO_Body_Img_end_out2__Rend__0, 506880*sizeof(char));
	fifoInit(FIFO_Head_Orientation_end_ke__0, 12004*sizeof(char), NULL, 0);
	fifoInit(FIFO_Head_octavesH_end_out5___0, 24*sizeof(char), NULL, 0);
	fifoInit(FIFO_Head_octavesW_end_out6___0, 24*sizeof(char), NULL, 0);
	fifoInit(FIFO_Head_sigmas_end_out3__R__0, 144*sizeof(char), NULL, 0);
	fifoInit(FIFO_Head_Render_end_b__Writ__0, 101376*sizeof(char), NULL, 0);
	sem_init(&sem_2_SSRE,0,0/*init_val*/); // WritePGM_init_b > WritePGM
	fifoInit(FIFO_Head_Init_end_octavesH___0, 24*sizeof(char), NULL, 0);
	fifoInit(FIFO_Head_Init_end_octavesW___0, 24*sizeof(char), NULL, 0);
	fifoInit(FIFO_Head_Init_end_sigmas__s__0, 144*sizeof(char), NULL, 0);
	sem_init(&sem_5_SSRE,0,0/*init_val*/); // octavesH > DoG
	sem_init(&sem_6_SSRE,0,0/*init_val*/); // octavesH > BuildOB
	sem_init(&sem_7_SSRE,0,0/*init_val*/); // octavesW > DoG
	sem_init(&sem_8_SSRE,0,0/*init_val*/); // octavesW > BuildOB
	sem_init(&sem_9_SSRE,0,0/*init_val*/); // Img > Img_end_out1
	sem_init(&sem_10_SSRE,0,0/*init_val*/); // Render > Render_end_b
	sem_init(&sem_11_SSRE,0,0/*init_val*/); // Render > Render_end_r
	sem_init(&sem_12_SSRE,0,0/*init_val*/); // Extreme > Extreme_end_keyPointList

	// Begin the execution loop 
	while(1){
		pthread_barrier_wait(&iter_barrier);
		if(stopThreads){
			pthread_exit(NULL);
		}
		fifoPop(init_out__dog__0, FIFO_Head_DoG_end_dog__Extre__0, 12165120*sizeof(char), NULL, 0);
		fifoPop(init_out__in__0, FIFO_Head_ReadYUV_end_y__Img__0, 101376*sizeof(char), NULL, 0);
		receiveStart(); // Core2 > Core1: Init__Init_end_octavesW_g__0 
		receiveEnd(&sem_0_SSRE/*ID*/); // Core2 > Core1: Init__Init_end_octavesW_g__0 
		fifoPop(init_out__keyPointList__0, FIFO_Head_Extreme_end_keyPoi__0, 12004*sizeof(char), NULL, 0);
		receiveStart(); // Core2 > Core1: Orientation_init_scaleSpace___0 
		receiveEnd(&sem_1_SSRE/*ID*/); // Core2 > Core1: Orientation_init_scaleSpace___0 
		readYUV(352/*xsize*/,288/*ysize*/,y__end_in__0); // ReadYUV
		fifoPop(init_out__img__1, FIFO_Head_Img_end_out2__Rend__0, 101376*sizeof(char), FIFO_Body_Img_end_out2__Rend__0, 506880*sizeof(char));
		fifoPop(init_out__keyPointList__1, FIFO_Head_Orientation_end_ke__0, 12004*sizeof(char), NULL, 0);
		fifoPop(init_out__octavesH__0, FIFO_Head_octavesH_end_out5___0, 24*sizeof(char), NULL, 0);
		fifoPop(init_out__octavesW__0, FIFO_Head_octavesW_end_out6___0, 24*sizeof(char), NULL, 0);
		fifoPop(init_out__sigmas__0, FIFO_Head_sigmas_end_out3__R__0, 144*sizeof(char), NULL, 0);
		fifoPop(init_out__b__0, FIFO_Head_Render_end_b__Writ__0, 101376*sizeof(char), NULL, 0);
		sendStart(&sem_2_SSRE/*ID*/); // Core1 > Core0: WritePGM_init_b__WritePGM__0 
		sendEnd(); // Core1 > Core0: WritePGM_init_b__WritePGM__0 
		fifoPop(init_out__in__3, FIFO_Head_Init_end_octavesH___0, 24*sizeof(char), NULL, 0);
		fifoPop(init_out__in__2, FIFO_Head_Init_end_octavesW___0, 24*sizeof(char), NULL, 0);
		fifoPop(init_out__in__4, FIFO_Head_Init_end_sigmas__s__0, 144*sizeof(char), NULL, 0);
		// Broadcast octavesH
		{
			memcpy(out1__octavesH__0+0, init_out__in__3+0, 6*sizeof(int));
			memcpy(out3__octavesH__0+0, init_out__in__3+0, 6*sizeof(int));
			memcpy(out4__octavesH__0+0, init_out__in__3+0, 6*sizeof(int));
			memcpy(out5__end_in__0+0, init_out__in__3+0, 6*sizeof(int));
		}
		sendStart(&sem_5_SSRE/*ID*/); // Core1 > Core2: octavesH__DoG__0 
		sendEnd(); // Core1 > Core2: octavesH__DoG__0 
		sendStart(&sem_6_SSRE/*ID*/); // Core1 > Core2: octavesH__BuildOB__0 
		sendEnd(); // Core1 > Core2: octavesH__BuildOB__0 
		// Broadcast octavesW
		{
			memcpy(out1__octavesW__0+0, init_out__in__2+0, 6*sizeof(int));
			memcpy(out3__octavesW__0+0, init_out__in__2+0, 6*sizeof(int));
			memcpy(out4__octavesW__0+0, init_out__in__2+0, 6*sizeof(int));
			memcpy(out5__octavesW__0+0, init_out__in__2+0, 6*sizeof(int));
			memcpy(out6__end_in__0+0, init_out__in__2+0, 6*sizeof(int));
		}
		sendStart(&sem_7_SSRE/*ID*/); // Core1 > Core2: octavesW__DoG__0 
		sendEnd(); // Core1 > Core2: octavesW__DoG__0 
		sendStart(&sem_8_SSRE/*ID*/); // Core1 > Core2: octavesW__BuildOB__0 
		sendEnd(); // Core1 > Core2: octavesW__BuildOB__0 
		// Broadcast sigmas
		{
			memcpy(out2__sigmas__0+0, init_out__in__4+0, 36*sizeof(float));
			memcpy(out3__end_in__0+0, init_out__in__4+0, 36*sizeof(float));
		}
		fifoPush(out5__end_in__0, FIFO_Head_octavesH_end_out5___0, 24*sizeof(char), NULL, 0);
		fifoPush(out6__end_in__0, FIFO_Head_octavesW_end_out6___0, 24*sizeof(char), NULL, 0);
		fifoPush(out3__end_in__0, FIFO_Head_sigmas_end_out3__R__0, 144*sizeof(char), NULL, 0);
		fifoPush(octavesW_g__end_in__0, FIFO_Head_Init_end_octavesW___0, 24*sizeof(char), NULL, 0);
		// Broadcast Img
		{
			memcpy(out1__end_in__0+0, init_out__in__0+0, 101376*sizeof(uchar));
			memcpy(out2__end_in__1+0, init_out__in__0+0, 101376*sizeof(uchar));
		}
		sendStart(&sem_9_SSRE/*ID*/); // Core1 > Core2: Img__Img_end_out1__0 
		sendEnd(); // Core1 > Core2: Img__Img_end_out1__0 
		render(init_out__img__1,init_out__octavesW__0,init_out__octavesH__0,init_out__keyPointList__1,init_out__sigmas__0,r__end_in__0,g__end_in__0,b__end_in__0); // Render
		sendStart(&sem_10_SSRE/*ID*/); // Core1 > Core2: Render__Render_end_b__0 
		sendEnd(); // Core1 > Core2: Render__Render_end_b__0 
		sendStart(&sem_11_SSRE/*ID*/); // Core1 > Core2: Render__Render_end_r__0 
		sendEnd(); // Core1 > Core2: Render__Render_end_r__0 
		fifoPush(out2__end_in__1, FIFO_Head_Img_end_out2__Rend__0, 101376*sizeof(char), FIFO_Body_Img_end_out2__Rend__0, 506880*sizeof(char));
		fifoPush(y__end_in__0, FIFO_Head_ReadYUV_end_y__Img__0, 101376*sizeof(char), NULL, 0);
		extreme(keyPointList__end_in__0,init_out__dog__0,out4__octavesW__0,out4__octavesH__0); // Extreme
		sendStart(&sem_12_SSRE/*ID*/); // Core1 > Core2: Extreme__Extreme_end_keyPoin__0 
		sendEnd(); // Core1 > Core2: Extreme__Extreme_end_keyPoin__0 
		orientation(init_out__keyPointList__0,keyPointListCP__end_in__0,init_out__scaleSpace__0,out2__sigmas__0,out5__octavesW__0); // Orientation
		receiveStart(); // Core2 > Core1: scaleSpace__scaleSpace_end_o__0 
		receiveEnd(&sem_13_SSRE/*ID*/); // Core2 > Core1: scaleSpace__scaleSpace_end_o__0 
		fifoPush(keyPointListCP__end_in__0, FIFO_Head_Orientation_end_ke__0, 12004*sizeof(char), NULL, 0);
		fifoPush(out2__end_in__0, FIFO_Head_scaleSpace_end_out__0, 14598144*sizeof(char), FIFO_Body_scaleSpace_end_out__0, 14598144*sizeof(char));
		fifoPush(g__end_in__0, FIFO_Head_Render_end_g__Writ__0, 101376*sizeof(char), NULL, 0);
	}
}
