/** 
 * @file Core1.c
 * @generated by CPrinter
 * @date Fri May 08 16:26:34 CEST 2015
 */

#include "../include/x86.h"

// Core Global Declaration
extern pthread_barrier_t iter_barrier;
extern int stopThreads;
extern char SharedMem[172744688]; //  size:= 172744688*char
extern uchar *const init_out__octaves__0;  // BuildSS_2_init_octaves_init_out > BuildSS_2_octaves size:= 101376*uchar defined in Core0
extern uchar *const init_out__octaves__1;  // BuildSS_5_init_octaves_init_out > BuildSS_5_octaves size:= 101376*uchar defined in Core0
extern char *const explode_ParalSS_Paral__Build__5;  // explode_ParalSS_Paral > BuildSS_5 size:= 4*char defined in Core0
extern sem_t sem_10_SSRE; 
extern char *const explode_ParalSS_Paral__Build__0;  // explode_ParalSS_Paral > BuildSS_2 size:= 4*char defined in Core0
extern sem_t sem_13_SSRE; 
extern float *const scaleSpace__end_in__3;  // BuildSS_2_scaleSpace > BuildSS_2_end_scaleSpace_end_in size:= 608256*float defined in Core0
extern int *const Paral_2__Paral__0;  // explode_ParalSS_Paral_Paral_2 > BuildSS_2_Paral size:= 1*int defined in Core0
extern char *const BuildSS_2__BuildSS_2_end_sca__0;  // BuildSS_2 > BuildSS_2_end_scaleSpace size:= 2433024*char defined in Core0
extern float *const scaleSpace__end_in__4;  // BuildSS_5_scaleSpace > BuildSS_5_end_scaleSpace_end_in size:= 608256*float defined in Core0
extern int *const Paral_5__Paral__0;  // explode_ParalSS_Paral_Paral_5 > BuildSS_5_Paral size:= 1*int defined in Core0
extern char *const FIFO_Head_BuildSS_5_end_scal__0;  // FIFO_Head_BuildSS_5_end_scaleSpace > implode_scaleSpace_in_init_in_3041280 size:= 2433024*char defined in Core0

// Core Global Definitions
char *const FIFO_Head_explode_BuildOB_oc__2 = (char*) (SharedMem+172541888);  // FIFO_Head_explode_BuildOB_octaves_end_octaves_202752 > BuildSS_2_init_octaves size:= 101376*char
char *const FIFO_Head_explode_BuildOB_oc__3 = (char*) (SharedMem+129631196);  // FIFO_Head_explode_BuildOB_octaves_end_octaves_506880 > BuildSS_5_init_octaves size:= 101376*char
sem_t sem_16_SSRE;

void *computationThread_Core1(void *arg){
	// Initialisation(s)
	fifoInit(FIFO_Head_explode_BuildOB_oc__2, 101376*sizeof(char), NULL, 0);
	fifoInit(FIFO_Head_explode_BuildOB_oc__3, 101376*sizeof(char), NULL, 0);
	sem_init(&sem_16_SSRE,0,0/*init_val*/); // BuildSS_2 > BuildSS_2_end_scaleSpace

	// Begin the execution loop 
	while(1){
		pthread_barrier_wait(&iter_barrier);
		if(stopThreads){
			pthread_exit(NULL);
		}
		fifoPop(init_out__octaves__0, FIFO_Head_explode_BuildOB_oc__2, 101376*sizeof(char), NULL, 0);
		fifoPop(init_out__octaves__1, FIFO_Head_explode_BuildOB_oc__3, 101376*sizeof(char), NULL, 0);
		receiveStart(); // Core0 > Core1: explode_ParalSS_Paral__Build__5 
		receiveEnd(&sem_10_SSRE/*ID*/); // Core0 > Core1: explode_ParalSS_Paral__Build__5 
		receiveStart(); // Core0 > Core1: explode_ParalSS_Paral__Build__0 
		receiveEnd(&sem_13_SSRE/*ID*/); // Core0 > Core1: explode_ParalSS_Paral__Build__0 
		buildSS(init_out__octaves__0,scaleSpace__end_in__3,352/*xsize*/,288/*ysize*/,Paral_2__Paral__0); // BuildSS_2
		sendStart(&sem_16_SSRE/*ID*/); // Core1 > Core2: BuildSS_2__BuildSS_2_end_sca__0 
		sendEnd(); // Core1 > Core2: BuildSS_2__BuildSS_2_end_sca__0 
		buildSS(init_out__octaves__1,scaleSpace__end_in__4,352/*xsize*/,288/*ysize*/,Paral_5__Paral__0); // BuildSS_5
		fifoPush(scaleSpace__end_in__4, FIFO_Head_BuildSS_5_end_scal__0, 2433024*sizeof(char), NULL, 0);
	}
}
