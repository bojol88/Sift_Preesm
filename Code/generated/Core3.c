/** 
 * @file Core3.c
 * @generated by CPrinter
 * @date Fri May 08 16:26:34 CEST 2015
 */

#include "../include/x86.h"

// Core Global Declaration
extern pthread_barrier_t iter_barrier;
extern int stopThreads;
extern char *const BuildSS_0_init_octaves__Buil__0;  // BuildSS_0_init_octaves > BuildSS_0 size:= 101376*char defined in Core0
extern sem_t sem_1_SSRE; 
extern char SharedMem[172744688]; //  size:= 172744688*char
extern uchar *const init_out__octaves__5;  // BuildSS_1_init_octaves_init_out > BuildSS_1_octaves size:= 101376*uchar defined in Core0
extern char *const BuildSS_1_init_octaves__Buil__0;  // BuildSS_1_init_octaves > BuildSS_1 size:= 101376*char defined in Core0
extern uchar *const init_out__octaves__2;  // BuildSS_3_init_octaves_init_out > BuildSS_3_octaves size:= 101376*uchar defined in Core0
extern char *const BuildSS_3_init_octaves__Buil__0;  // BuildSS_3_init_octaves > BuildSS_3 size:= 101376*char defined in Core0
extern char *const BuildSS_4_init_octaves__Buil__0;  // BuildSS_4_init_octaves > BuildSS_4 size:= 101376*char defined in Core0
extern sem_t sem_4_SSRE; 
extern char *const explode_ParalSS_Paral__Build__1;  // explode_ParalSS_Paral > BuildSS_4 size:= 4*char defined in Core0
extern sem_t sem_11_SSRE; 
extern char *const explode_ParalSS_Paral__Build__2;  // explode_ParalSS_Paral > BuildSS_0 size:= 4*char defined in Core0
extern sem_t sem_14_SSRE; 
extern uchar *const init_out__octaves__3;  // BuildSS_0_init_octaves_init_out > BuildSS_0_octaves size:= 101376*uchar defined in Core0
extern float *const scaleSpace__end_in__0;  // BuildSS_0_scaleSpace > BuildSS_0_end_scaleSpace_end_in size:= 608256*float defined in Core0
extern int *const Paral_0__Paral__0;  // explode_ParalSS_Paral_Paral_0 > BuildSS_0_Paral size:= 1*int defined in Core0
extern char *const BuildSS_0__BuildSS_0_end_sca__0;  // BuildSS_0 > BuildSS_0_end_scaleSpace size:= 2433024*char defined in Core0
extern uchar *const init_out__octaves__4;  // BuildSS_4_init_octaves_init_out > BuildSS_4_octaves size:= 101376*uchar defined in Core0
extern float *const scaleSpace__end_in__5;  // BuildSS_4_scaleSpace > BuildSS_4_end_scaleSpace_end_in size:= 608256*float defined in Core0
extern int *const Paral_4__Paral__0;  // explode_ParalSS_Paral_Paral_4 > BuildSS_4_Paral size:= 1*int defined in Core0
extern char *const FIFO_Head_BuildSS_4_end_scal__0;  // FIFO_Head_BuildSS_4_end_scaleSpace > implode_scaleSpace_in_init_in_2433024 size:= 2433024*char defined in Core0

// Core Global Definitions
char *const FIFO_Head_explode_BuildOB_oc__4 = (char*) (SharedMem+27713448);  // FIFO_Head_explode_BuildOB_octaves_end_octaves_101376 > BuildSS_1_init_octaves size:= 101376*char
sem_t sem_2_SSRE;
char *const FIFO_Head_explode_BuildOB_oc__0 = (char*) (SharedMem+5271552);  // FIFO_Head_explode_BuildOB_octaves_end_octaves_304128 > BuildSS_3_init_octaves size:= 101376*char
sem_t sem_3_SSRE;
sem_t sem_15_SSRE;

void *computationThread_Core3(void *arg){
	// Initialisation(s)
	fifoInit(FIFO_Head_explode_BuildOB_oc__4, 101376*sizeof(char), NULL, 0);
	sem_init(&sem_2_SSRE,0,0/*init_val*/); // BuildSS_1_init_octaves > BuildSS_1
	fifoInit(FIFO_Head_explode_BuildOB_oc__0, 101376*sizeof(char), NULL, 0);
	sem_init(&sem_3_SSRE,0,0/*init_val*/); // BuildSS_3_init_octaves > BuildSS_3
	sem_init(&sem_15_SSRE,0,0/*init_val*/); // BuildSS_0 > BuildSS_0_end_scaleSpace

	// Begin the execution loop 
	while(1){
		pthread_barrier_wait(&iter_barrier);
		if(stopThreads){
			pthread_exit(NULL);
		}
		receiveStart(); // Core2 > Core3: BuildSS_0_init_octaves__Buil__0 
		receiveEnd(&sem_1_SSRE/*ID*/); // Core2 > Core3: BuildSS_0_init_octaves__Buil__0 
		fifoPop(init_out__octaves__5, FIFO_Head_explode_BuildOB_oc__4, 101376*sizeof(char), NULL, 0);
		sendStart(&sem_2_SSRE/*ID*/); // Core3 > Core0: BuildSS_1_init_octaves__Buil__0 
		sendEnd(); // Core3 > Core0: BuildSS_1_init_octaves__Buil__0 
		fifoPop(init_out__octaves__2, FIFO_Head_explode_BuildOB_oc__0, 101376*sizeof(char), NULL, 0);
		sendStart(&sem_3_SSRE/*ID*/); // Core3 > Core2: BuildSS_3_init_octaves__Buil__0 
		sendEnd(); // Core3 > Core2: BuildSS_3_init_octaves__Buil__0 
		receiveStart(); // Core2 > Core3: BuildSS_4_init_octaves__Buil__0 
		receiveEnd(&sem_4_SSRE/*ID*/); // Core2 > Core3: BuildSS_4_init_octaves__Buil__0 
		receiveStart(); // Core0 > Core3: explode_ParalSS_Paral__Build__1 
		receiveEnd(&sem_11_SSRE/*ID*/); // Core0 > Core3: explode_ParalSS_Paral__Build__1 
		receiveStart(); // Core0 > Core3: explode_ParalSS_Paral__Build__2 
		receiveEnd(&sem_14_SSRE/*ID*/); // Core0 > Core3: explode_ParalSS_Paral__Build__2 
		buildSS(init_out__octaves__3,scaleSpace__end_in__0,352/*xsize*/,288/*ysize*/,Paral_0__Paral__0); // BuildSS_0
		sendStart(&sem_15_SSRE/*ID*/); // Core3 > Core2: BuildSS_0__BuildSS_0_end_sca__0 
		sendEnd(); // Core3 > Core2: BuildSS_0__BuildSS_0_end_sca__0 
		buildSS(init_out__octaves__4,scaleSpace__end_in__5,352/*xsize*/,288/*ysize*/,Paral_4__Paral__0); // BuildSS_4
		fifoPush(scaleSpace__end_in__5, FIFO_Head_BuildSS_4_end_scal__0, 2433024*sizeof(char), NULL, 0);
	}
}
