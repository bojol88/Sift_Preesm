/** 
 * @file Core0.c
 * @generated by CPrinter
 * @date Wed Mar 18 02:43:39 CET 2015
 */

#include "../include/x86.h"

// Core Global Declaration
extern pthread_barrier_t iter_barrier;
extern int stopThreads;

// Core Global Definitions
char SharedMem[57206116]; //  size:= 57206116*char
char *const octavesW__Orientation__0 = (char*) (SharedMem+42493036);  // octavesW > Orientation size:= 24*char
char *const octavesW__Extreme__0 = (char*) (SharedMem+57206068);  // octavesW > Extreme size:= 24*char
char *const octavesH__Extreme__0 = (char*) (SharedMem+27675648);  // octavesH > Extreme size:= 24*char
char *const Init__octavesH__0 = (char*) (SharedMem+57206092);  // Init > octavesH size:= 24*char
char *const octavesH__BuildOB__0 = (char*) (SharedMem+42493084);  // octavesH > BuildOB size:= 24*char
char *const DoG__Extreme__0 = (char*) (SharedMem+0);  // DoG > Extreme size:= 12165120*char
char *const Render__WritePGM__0 = (char*) (SharedMem+12773376);  // Render > WritePGM size:= 304128*char
char *const sigmas__Orientation__0 = (char*) (SharedMem+27675672);  // sigmas > Orientation size:= 144*char
char *const BuildOB__BuildSS__0 = (char*) (SharedMem+12165120);  // BuildOB > BuildSS size:= 608256*char
char *const octavesH__Render__0 = (char*) (SharedMem+27675816);  // octavesH > Render size:= 24*char
char *const Init__octavesW__0 = (char*) (SharedMem+42506188);  // Init > octavesW size:= 24*char
char *const scaleSpace__Orientation__0 = (char*) (SharedMem+27675840);  // scaleSpace > Orientation size:= 14598144*char
char *const ReadYUV__Img__0 = (char*) (SharedMem+42391612);  // ReadYUV > Img size:= 101376*char
char *const sigmas__Render__0 = (char*) (SharedMem+42290092);  // sigmas > Render size:= 144*char
char *const BuildSS__scaleSpace__0 = (char*) (SharedMem+42607924);  // BuildSS > scaleSpace size:= 14598144*char
char *const scaleSpace__DoG__0 = (char*) (SharedMem+13077504);  // scaleSpace > DoG size:= 14598144*char
char *const Extreme__Orientation__0 = (char*) (SharedMem+42494160);  // Extreme > Orientation size:= 12004*char
char *const Img__Render__0 = (char*) (SharedMem+42290236);  // Img > Render size:= 101376*char
char *const octavesW__Render__0 = (char*) (SharedMem+42493012);  // octavesW > Render size:= 24*char
char *const octavesW__BuildSS__0 = (char*) (SharedMem+42506164);  // octavesW > BuildSS size:= 24*char
char *const Init__sigmas__0 = (char*) (SharedMem+42607756);  // Init > sigmas size:= 144*char
char *const octavesH__DoG__0 = (char*) (SharedMem+42493060);  // octavesH > DoG size:= 24*char
char *const octavesH__BuildSS__0 = (char*) (SharedMem+42492988);  // octavesH > BuildSS size:= 24*char
char *const octavesW__BuildOB__0 = (char*) (SharedMem+42607732);  // octavesW > BuildOB size:= 24*char
char *const octavesW__DoG__0 = (char*) (SharedMem+42607900);  // octavesW > DoG size:= 24*char
char *const sigmas__BuildSS__0 = (char*) (SharedMem+42607588);  // sigmas > BuildSS size:= 144*char
char *const Img__BuildOB__0 = (char*) (SharedMem+42506212);  // Img > BuildOB size:= 101376*char
char *const Orientation__Render__0 = (char*) (SharedMem+42278088);  // Orientation > Render size:= 12004*char
int *const out5__octavesW__0 = (int*) (SharedMem+42493036);  // octavesW_out5 > Orientation_octavesW size:= 6*int
uchar *const b__b__0 = (uchar*) (SharedMem+12976128);  // Render_b > WritePGM_b size:= 101376*uchar
pointList_t *const keyPointList__keyPointList__0 = (pointList_t*) (SharedMem+42494160);  // Extreme_keyPointList > Orientation_keyPointList size:= 1*pointList_t
int *const out3__octavesH__0 = (int*) (SharedMem+42493060);  // octavesH_out3 > DoG_octavesH size:= 6*int
int *const out5__octavesH__0 = (int*) (SharedMem+27675816);  // octavesH_out5 > Render_octavesH size:= 6*int
uchar *const g__g__0 = (uchar*) (SharedMem+12874752);  // Render_g > WritePGM_g size:= 101376*uchar
int *const octavesW_g__in__0 = (int*) (SharedMem+42506188);  // Init_octavesW_g > octavesW_in size:= 6*int
uchar *const octaves__octaves__0 = (uchar*) (SharedMem+12165120);  // BuildOB_octaves > BuildSS_octaves size:= 608256*uchar
int *const out2__octavesW__0 = (int*) (SharedMem+42506164);  // octavesW_out2 > BuildSS_octavesW size:= 6*int
uchar *const out2__img__0 = (uchar*) (SharedMem+42290236);  // Img_out2 > Render_img size:= 101376*uchar
float *const out2__scaleSpace__0 = (float*) (SharedMem+27675840);  // scaleSpace_out2 > Orientation_scaleSpace size:= 3649536*float
pointList_t *const keyPointListCP__keyPointList__0 = (pointList_t*) (SharedMem+42278088);  // Orientation_keyPointListCP > Render_keyPointList size:= 1*pointList_t
int *const out6__octavesW__0 = (int*) (SharedMem+42493012);  // octavesW_out6 > Render_octavesW size:= 6*int
float *const out1__sigmas__0 = (float*) (SharedMem+42607588);  // sigmas_out1 > BuildSS_sigmas size:= 36*float
int *const octavesH_g__in__0 = (int*) (SharedMem+57206092);  // Init_octavesH_g > octavesH_in size:= 6*int
float *const out3__sigmas__0 = (float*) (SharedMem+42290092);  // sigmas_out3 > Render_sigmas size:= 36*float
float *const scaleSpace__in__0 = (float*) (SharedMem+42607924);  // BuildSS_scaleSpace > scaleSpace_in size:= 3649536*float
int *const out4__octavesW__0 = (int*) (SharedMem+57206068);  // octavesW_out4 > Extreme_octavesW size:= 6*int
float *const out2__sigmas__0 = (float*) (SharedMem+27675672);  // sigmas_out2 > Orientation_sigmas size:= 36*float
int *const out1__octavesW__0 = (int*) (SharedMem+42607732);  // octavesW_out1 > BuildOB_octavesW size:= 6*int
int *const out4__octavesH__0 = (int*) (SharedMem+27675648);  // octavesH_out4 > Extreme_octavesH size:= 6*int
float *const sigmas__in__0 = (float*) (SharedMem+42607756);  // Init_sigmas > sigmas_in size:= 36*float
uchar *const r__r__0 = (uchar*) (SharedMem+12773376);  // Render_r > WritePGM_r size:= 101376*uchar
uchar *const out1__img__0 = (uchar*) (SharedMem+42506212);  // Img_out1 > BuildOB_img size:= 101376*uchar
float *const out1__scaleSpace__0 = (float*) (SharedMem+13077504);  // scaleSpace_out1 > DoG_scaleSpace size:= 3649536*float
uchar *const y__in__0 = (uchar*) (SharedMem+42391612);  // ReadYUV_y > Img_in size:= 101376*uchar
float *const dog__dog__0 = (float*) (SharedMem+0);  // DoG_dog > Extreme_dog size:= 3041280*float
int *const out2__octavesH__0 = (int*) (SharedMem+42492988);  // octavesH_out2 > BuildSS_octavesH size:= 6*int
int *const out3__octavesW__0 = (int*) (SharedMem+42607900);  // octavesW_out3 > DoG_octavesW size:= 6*int
int *const out1__octavesH__0 = (int*) (SharedMem+42493084);  // octavesH_out1 > BuildOB_octavesH size:= 6*int

void *computationThread_Core0(void *arg){
	// Initialisation(s)
	initReadYUV(352/*xsize*/,288/*ysize*/); // ReadYUV

	// Begin the execution loop 
	while(1){
		pthread_barrier_wait(&iter_barrier);
		if(stopThreads){
			pthread_exit(NULL);
		}
		InitSift(352/*xsize*/,288/*ysize*/,octavesW_g__in__0,octavesH_g__in__0,sigmas__in__0); // Init
		readYUV(352/*xsize*/,288/*ysize*/,y__in__0); // ReadYUV
		// Broadcast Img
		{
			memcpy(out1__img__0+0, y__in__0+0, 101376*sizeof(uchar));
			memcpy(out2__img__0+0, y__in__0+0, 101376*sizeof(uchar));
		}
		// Broadcast octavesH
		{
			memcpy(out1__octavesH__0+0, octavesH_g__in__0+0, 6*sizeof(int));
			memcpy(out2__octavesH__0+0, octavesH_g__in__0+0, 6*sizeof(int));
			memcpy(out3__octavesH__0+0, octavesH_g__in__0+0, 6*sizeof(int));
			memcpy(out4__octavesH__0+0, octavesH_g__in__0+0, 6*sizeof(int));
			memcpy(out5__octavesH__0+0, octavesH_g__in__0+0, 6*sizeof(int));
		}
		// Broadcast octavesW
		{
			memcpy(out1__octavesW__0+0, octavesW_g__in__0+0, 6*sizeof(int));
			memcpy(out2__octavesW__0+0, octavesW_g__in__0+0, 6*sizeof(int));
			memcpy(out3__octavesW__0+0, octavesW_g__in__0+0, 6*sizeof(int));
			memcpy(out4__octavesW__0+0, octavesW_g__in__0+0, 6*sizeof(int));
			memcpy(out5__octavesW__0+0, octavesW_g__in__0+0, 6*sizeof(int));
			memcpy(out6__octavesW__0+0, octavesW_g__in__0+0, 6*sizeof(int));
		}
		// Broadcast sigmas
		{
			memcpy(out1__sigmas__0+0, sigmas__in__0+0, 36*sizeof(float));
			memcpy(out2__sigmas__0+0, sigmas__in__0+0, 36*sizeof(float));
			memcpy(out3__sigmas__0+0, sigmas__in__0+0, 36*sizeof(float));
		}
		buildOB(out1__img__0,octaves__octaves__0,out1__octavesW__0,out1__octavesH__0); // BuildOB
		buildSS(octaves__octaves__0,scaleSpace__in__0,out2__octavesW__0,out2__octavesH__0,out1__sigmas__0); // BuildSS
		// Broadcast scaleSpace
		{
			memcpy(out1__scaleSpace__0+0, scaleSpace__in__0+0, 3649536*sizeof(float));
			memcpy(out2__scaleSpace__0+0, scaleSpace__in__0+0, 3649536*sizeof(float));
		}
		DoG(dog__dog__0,out1__scaleSpace__0,out3__octavesW__0,out3__octavesH__0); // DoG
		extreme(keyPointList__keyPointList__0,dog__dog__0,out4__octavesW__0,out4__octavesH__0); // Extreme
		orientation(keyPointList__keyPointList__0,keyPointListCP__keyPointList__0,out2__scaleSpace__0,out2__sigmas__0,out5__octavesW__0); // Orientation
		render(out2__img__0,out6__octavesW__0,out5__octavesH__0,keyPointListCP__keyPointList__0,out3__sigmas__0,r__r__0,g__g__0,b__b__0); // Render
		write_ppm(r__r__0,g__g__0,b__b__0,352/*w*/,288/*h*/); // WritePGM
	}
}
